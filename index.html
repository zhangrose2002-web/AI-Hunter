<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI çŒäºº - å°ç„Šè®¾å¤‡å¸‚åœºç›‘æµ‹ç³»ç»Ÿ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&family=Noto+Sans+SC:wght@400;700&display=swap');
        body {
            font-family: 'Inter', 'Noto Sans SC', sans-serif;
            background-color: #020617;
            color: #e2e8f0;
        }
        .glass-panel {
            background: rgba(15, 23, 42, 0.8);
            backdrop-filter: blur(16px);
            border: 1px solid rgba(51, 65, 85, 0.5);
        }
        .loading-shimmer {
            background: linear-gradient(90deg, #0f172a 25%, #1e293b 50%, #0f172a 75%);
            background-size: 200% 100%;
            animation: shimmer 1.5s infinite;
        }
        @keyframes shimmer {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useMemo, useEffect } = React;

        function App() {
            const [rawData, setRawData] = useState([]);
            const [loading, setLoading] = useState(true);
            const [error, setError] = useState(null);
            const [searchTerm, setSearchTerm] = useState("");
            const [filterRegion, setFilterRegion] = useState("å…¨éƒ¨");

            // è‡ªåŠ¨åŠ è½½ GitHub ä»“åº“ä¸­çš„ data.json
            useEffect(() => {
                const fetchData = async () => {
                    try {
                        // æ·»åŠ éšæœºå‚æ•°é˜²æ­¢ç¼“å­˜
                        const response = await fetch(`data.json?t=${new Date().getTime()}`);
                        if (!response.ok) throw new Error('æ•°æ®æ–‡ä»¶åŠ è½½å¤±è´¥');
                        const data = await response.json();
                        
                        // å…¼å®¹ä¸¤ç§æ ¼å¼ï¼šç›´æ¥æ•°ç»„ æˆ– å¸¦ metadata çš„å¯¹è±¡
                        const list = Array.isArray(data) ? data : (data.customers || []);
                        setRawData(list);
                    } catch (err) {
                        setError(err.message);
                    } finally {
                        setLoading(false);
                    }
                };
                fetchData();
            }, []);

            const filteredData = useMemo(() => {
                return rawData.filter(item => {
                    const searchStr = searchTerm.toLowerCase();
                    // é€‚é…çˆ¬è™«è„šæœ¬è¾“å‡ºçš„å­—æ®µå
                    const name = (item.name || "").toLowerCase();
                    const industry = (item.industry || "").toLowerCase();
                    const reason = (item.reason || (item.analysis && item.analysis.reason) || "").toLowerCase();
                    
                    const matchesSearch = name.includes(searchStr) || industry.includes(searchStr) || reason.includes(searchStr);
                    
                    // åœ°åŒºè¯†åˆ«é€»è¾‘
                    const loc = item.location || "";
                    const province = typeof loc === 'object' ? loc.province : loc;
                    const isChina = ["æ±Ÿè‹", "å¹¿ä¸œ", "æ¹–åŒ—", "æµ™æ±Ÿ", "å®‰å¾½", "åŒ—äº¬", "ä¸Šæµ·", "æ·±åœ³", "æ— é”¡", "æ­¦æ±‰"].some(p => province && province.includes(p));
                    const regionCategory = isChina ? "ä¸­å›½" : "å›½é™…";

                    const matchesRegion = filterRegion === "å…¨éƒ¨" || regionCategory === filterRegion;
                    return matchesSearch && matchesRegion;
                });
            }, [searchTerm, filterRegion, rawData]);

            return (
                <div className="min-h-screen p-4 md:p-8 lg:px-12">
                    <div className="max-w-7xl mx-auto">
                        <header className="mb-8 flex flex-col md:flex-row md:items-end justify-between gap-4">
                            <div>
                                <h1 className="text-3xl font-bold text-white flex items-center gap-3">
                                    <span className="p-2 bg-indigo-600 rounded-lg text-xl">ğŸ¯</span>
                                    AI çŒäºº <span className="text-indigo-400">å°ç„Šå¸‚åœºç›‘æµ‹</span>
                                </h1>
                                <p className="text-slate-500 mt-2 text-sm">è‡ªåŠ¨è¿½è¸ªåŠå¯¼ä½“ã€MEMSåŠåŠŸç‡å™¨ä»¶å°è£…æ‰©äº§åŠ¨å‘</p>
                            </div>
                            <div className="text-right">
                                <span className="text-[10px] font-mono text-slate-600 bg-slate-900 px-3 py-1 rounded-full border border-slate-800">
                                    SYNC STATUS: {loading ? 'FETCHING...' : 'LIVE'}
                                </span>
                            </div>
                        </header>

                        <div className="glass-panel rounded-2xl p-4 mb-6 flex flex-col md:flex-row gap-4 items-center">
                            <div className="flex bg-slate-900 p-1 rounded-xl w-full md:w-auto border border-slate-800">
                                {["å…¨éƒ¨", "ä¸­å›½", "å›½é™…"].map(r => (
                                    <button 
                                        key={r}
                                        onClick={() => setFilterRegion(r)}
                                        className={`px-6 py-2 rounded-lg text-sm font-bold transition-all ${filterRegion === r ? 'bg-indigo-600 text-white shadow-lg' : 'text-slate-500 hover:text-white'}`}
                                    >
                                        {r}
                                    </button>
                                ))}
                            </div>
                            <div className="relative flex-1 w-full">
                                <input 
                                    type="text" 
                                    placeholder="æœç´¢ä¼ä¸šã€äº§çº¿ã€éœ€æ±‚å…³é”®è¯..."
                                    className="w-full bg-slate-800/50 border border-slate-700 rounded-xl px-4 py-2.5 text-sm focus:outline-none focus:border-indigo-500 transition-all"
                                    onChange={e => setSearchTerm(e.target.value)}
                                />
                            </div>
                        </div>

                        <div className="glass-panel rounded-2xl overflow-hidden shadow-2xl border-slate-800">
                            <table className="w-full text-left">
                                <thead className="bg-slate-900/80 text-slate-500 text-[11px] uppercase tracking-wider font-bold">
                                    <tr>
                                        <th className="px-6 py-4">æ½œåœ¨å®¢æˆ·</th>
                                        <th className="px-6 py-4">æ ¸å¿ƒè¡Œä¸š</th>
                                        <th className="px-6 py-4">æ‰©äº§/éœ€æ±‚æƒ…æŠ¥</th>
                                        <th className="px-6 py-4 text-right">æ“ä½œ</th>
                                    </tr>
                                </thead>
                                <tbody className="divide-y divide-slate-800">
                                    {loading ? (
                                        [...Array(5)].map((_, i) => (
                                            <tr key={i}><td colSpan="4" className="px-6 py-8 loading-shimmer"></td></tr>
                                        ))
                                    ) : filteredData.length > 0 ? filteredData.map((item, idx) => (
                                        <tr key={idx} className="hover:bg-indigo-900/10 transition-colors group">
                                            <td className="px-6 py-6">
                                                <div className="font-bold text-white text-base">{item.name}</div>
                                                <div className="text-xs text-indigo-400 mt-1 flex items-center gap-1">
                                                    ğŸ“ {typeof item.location === 'object' ? `${item.location.province}Â·${item.location.city}` : item.location}
                                                </div>
                                            </td>
                                            <td className="px-6 py-6">
                                                <span className="bg-slate-800 text-slate-300 text-[10px] px-2 py-1 rounded font-bold border border-slate-700">
                                                    {item.industry}
                                                </span>
                                            </td>
                                            <td className="px-6 py-6 max-w-md">
                                                <p className="text-sm text-slate-400 leading-relaxed">
                                                    {item.reason || (item.analysis && item.analysis.reason)}
                                                </p>
                                                <div className="flex gap-2 mt-2">
                                                    {(item.tags || (item.analysis && item.analysis.tags) || []).map(tag => (
                                                        <span key={tag} className="text-[9px] text-indigo-300/70">#{tag}</span>
                                                    ))}
                                                </div>
                                            </td>
                                            <td className="px-6 py-6 text-right">
                                                <a 
                                                    href={item.url || item.website || (item.contactInfo && item.contactInfo.sourceUrl) || "#"} 
                                                    target="_blank"
                                                    className="inline-flex items-center gap-1 text-xs font-bold text-indigo-400 hover:text-white transition-colors bg-indigo-500/10 px-3 py-2 rounded-lg border border-indigo-500/20"
                                                >
                                                    æŸ¥çœ‹çº¿ç´¢ <svg className="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"></path></svg>
                                                </a>
                                            </td>
                                        </tr>
                                    )) : (
                                        <tr><td colSpan="4" className="py-20 text-center text-slate-600">æ— åŒ¹é…çº¿ç´¢</td></tr>
                                    )}
                                </tbody>
                            </table>
                        </div>
                        
                        <footer className="mt-8 text-center text-slate-600 text-[10px] tracking-widest uppercase">
                            Â© {new Date().getFullYear()} å°ç„Šå•†æœºæ™ºæ…§æŒ–æ˜ç³»ç»Ÿ Â· DATA REFRESH VIA GITHUB ACTIONS
                        </footer>
                    </div>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
